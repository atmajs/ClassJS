/*!
 * ClassJS v1.0.45
 * Part of the Atma.js Project
 * http://atmajs.com/
 *
 * MIT license
 * http://opensource.org/licenses/MIT
 *
 * (c) 2012, 2014 Atma.js and other contributors
 */
(function(t,n){"use strict";function e(){return n(i,r)}var r,i="undefined"==typeof window||null==window.navigator?global:window;return r=t||i,"function"==typeof define&&define.amd?define(e):(e(),"undefined"!=typeof module&&(module.exports=r.Class),void 0)})(this,function(t,n){"use strict";function e(t){return"function"==typeof t}function r(t){return null!=t&&"object"==typeof t}function i(t){return null!=t&&"number"==typeof t.length&&"function"==typeof t.slice}function u(t){return"string"==typeof t}function o(t){return null==t?!1:"object"!=typeof t?!1:t.constructor===Object}function l(n){return void 0===n||n===t}function s(t,n){if(a(t))for(var e=0,r=t.length;r>e;e++)n(t[e],e);else n(t)}function a(t){return null!=t&&"object"==typeof t&&"number"==typeof t.length&&"function"==typeof t.splice}function c(t,n){return function(){return f(t,n,arguments)}}function f(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2]);case 4:return t.call(n,e[0],e[1],e[2],e[3]);case 5:return t.call(n,e[0],e[1],e[2],e[3],e[4])}return t.apply(n,e)}function h(t){var n=d.call(arguments,1);return function(){return arguments.length>0&&(n=n.concat(d.call(arguments))),f(t,null,n)}}function p(){}function v(n){if(this===X||null==this||this===t){var e=function(t){v.call(this,t)};return e.prototype._props=n,e}null!=n&&(this.deserialize?this.deserialize(n):v.deserialize(this,n))}function g(){}var d=Array.prototype.slice,y=Array.prototype.sort,m={ModelHost:null},_="__$class__";"function"!=typeof Array.isArray&&(Array.isArray=function(t){return t instanceof Array?!0:null==t||"object"!=typeof t?!1:void 0!==t.length&&"function"==typeof t.slice});var w,S,O,j,b;(function(){function t(t,e){if(null==e||"object"!=typeof e)return e;var r=this,i=r[t];return i[_]&&i.toJSON?n(i[_],e):e}function n(t,n){var e={};return e.json=n,e[_]=t,e}function r(t,n){var e;return null!=n&&"object"==typeof n&&n[_]&&(e=X(n[_]),"function"==typeof e?n=new e(n.json):console.error("<class:parse> Class was not registered",n[_])),n}w=function(t,n){M(m.ModelHost||X.Model,t,n)},S=function(t){return J(m.ModelHost||X.Model,t)},O=function(t,n){var r=u(t)?S(t):t;return!e(r)&&console.error("<class:patch> Not a Function",t),n.Base=r,r=X(n),u(t)&&w(t,r),r},j=function(n){return JSON.stringify(n,t)},b=function(t){return JSON.parse(t,r)}})();var T,A,z;(function(){function t(t,n){if(null!=n){"function"==typeof t&&(t=t.prototype),"function"==typeof n&&(n=n.prototype);var e,r;for(e in n)r=n[e],null!=r&&(t[e]=r)}}function n(t,n){var e;return e=t?function(n){var e=1===arguments.length&&c(n)?n:arguments;return f(t,this,e)}:p,function(){return this["super"]=e,f(n,this,arguments)}}function r(e,r,i,u,o){var a=u,c=u;if(a.constructor=e.prototype.constructor,null!=i&&(c[l]={},s(i,function(n){t(c[l],n)}),c=c[l]),null!=r&&(c[l]=r.prototype),null!=o)for(var f in o)a[f]=n(a[f],o[f]);e.prototype=a}function i(e,r,i,u,o){if(null!=r){var l=function(){};l.prototype=r.prototype,e.prototype=new l,e.prototype.constructor=e}if(null!=i&&s(i,function(n){delete n.constructor,t(e,n)}),null!=o){var a=e.prototype;for(var c in o)a[c]=n(a[c],o[c])}t(e,u)}function u(t){return e(t)?t.prototype:t}var l="__proto__",a=Object.prototype.toString,c=function(t){return"[object Arguments]"===a.call(t)};T=l in Object.prototype?r:i,A=function(t,n){if(null!=n)if(e(n))for(var r in n)e(n[r])&&n.hasOwnProperty(r)&&null==t[r]&&(t[r]=n[r]);else if(Array.isArray(n))for(var i=n.length,u=-1;i>++u;)A(t,n[u]);else if(n.Static){n=n.Static;for(var r in n)n.hasOwnProperty(r)&&null==t[r]&&(t[r]=n[r])}},z=function(t,n,e){var r,i;for(r in t)i=t[r],o(i)&&(null!=n&&o(n.prototype[r])&&P(i,n.prototype[r]),null!=e&&s(e,function(t){t=u(t),o(t[r])&&P(i,t[r])}))}})();var N,E;(function(){N=function(){var t,n,e=this,r={};for(t in e)if(95!==t.charCodeAt(0)&&"Static"!==t&&"Validate"!==t&&(n=e[t],null!=n)){switch(typeof n){case"function":continue;case"object":var i=n.toJSON;if(null==i)break;if(i===N||i===E){r[t]=n.toJSON();continue}}r[t]=n}return null!=e._id&&(r._id=e._id),r},E=function(){for(var t,n=this,e=n.length,r=0,i=Array(e);e>r;r++){if(t=n[r],null!=t&&"object"==typeof t){var u=t.toJSON;if(u===N||u===E){i[r]=t.toJSON();continue}if(null==u){i[r]=N.call(t);continue}}i[r]=t}return i}})();var x,J,M,P,H;(function(){x=function(t){e(t)&&(t=t.prototype);for(var n,r,i=1,u=arguments.length;u>i;i++){n=e(arguments[i])?arguments[i].prototype:arguments[i];for(r in n)if("Static"!==r||null==t.Static)t[r]=n[r];else for(r in n.Static)t.Static[r]=n.Static[r]}return t},J=function(t,n){for(var e=n.split("."),r=e.length,i=-1;r>++i;){if(null==t)return null;t=t[e[i]]}return t},M=function(t,n,e){for(var r,i=n.split("."),u=i.length,o=-1;u-1>++o;)r=i[o],null==t[r]&&(t[r]={}),t=t[r];t[i[o]]=e},P=function(t,n){for(var e in n)null==t[e]&&(t[e]=n[e]);return t},H=function(t,n){for(var e in n)null!=n[e]&&(t[e]=n[e]);return t}})();var $;(function(){function t(t,n,e){for(var r in n)e(J(t,r),n[r],r)}function n(t,n,e){for(var r in n)M(t,r,e(J(t,r),n[r],r))}function e(){var t=arguments;return function(n,e,r){for(var i,u=0,o=t.length;o>u;u++)if(i=t[u],i(n,e,r)===!1)return}}function r(t,n,e){return a(t)===!1?(console.warn("<patch> property is not an array",e),!1):void 0}function i(t,n){if(n.hasOwnProperty("$each"))for(var e=0,r=n.$each.length;r>e;e++)t.push(n.$each[e]);else t.push(n)}function u(t,n){t[n>0?"pop":"shift"]()}function o(){return console.error("<patch> pull Not Implemented")}function l(t,n){return t+n}function s(t,n){return n}function c(){return void 0}var f=0,h=1,p={$push:[t,e(r,i)],$pop:[t,e(r,u)],$pull:[t,e(r,o)],$inc:[n,l],$set:[n,s],$unset:[n,c],$bit:[n,c]};$=function(t,n){for(var e in n){var r=p[e];r?r[f](t,n[e],r[h]):console.error("Unknown or not implemented patcher",e)}return t}})();var C={};(function(){(function(t){function n(){this._callbacks=[]}function e(t){function e(t){return function(){u+=1,i[t]=Array.prototype.slice.call(arguments),u===o&&r.done(i)}}var r=new n,i=[];if(!t||!t.length)return r.done(i),r;for(var u=0,o=t.length,l=0;o>l;l++)t[l].then(e(l));return r}function r(t,e){var i=new n;return 0===t.length?i.done.apply(i,e):t[0].apply(null,e).then(function(){t.splice(0,1),r(t,arguments).then(function(){i.done.apply(i,arguments)})}),i}function i(t){var n="";if("string"==typeof t)n=t;else{var e=encodeURIComponent;for(var r in t)t.hasOwnProperty(r)&&(n+="&"+e(r)+"="+e(t[r]))}return n}function u(){var t;if(window.XMLHttpRequest)t=new XMLHttpRequest;else if(window.ActiveXObject)try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(n){t=new ActiveXObject("Microsoft.XMLHTTP")}return t}function o(t,e,r,o){function l(){v.abort(),g.done(f,"",v)}var v,g=new n,d=o&&o["Content-Type"]||p.contentType;try{v=u()}catch(y){return g.done(c,""),g}if(r)if("GET"===t)e+="?"+i(r),r=null;else switch(d){case s:r=i(r);break;case a:try{r=JSON.stringify(r)}catch(m){return g.done(h,""),g}default:r=i(r)}v.open(t,e),r&&v.setRequestHeader("Content-Type",d);for(var _ in o)o.hasOwnProperty(_)&&v.setRequestHeader(_,o[_]);var w=p.ajaxTimeout;if(w)var S=setTimeout(l,w);return v.onreadystatechange=function(){if(w&&clearTimeout(S),4===v.readyState){var t=!v.status||(200>v.status||v.status>=300)&&304!==v.status;g.done(t,v.responseText,v)}},v.send(r),g}function l(t){return function(n,e,r){return o(t,n,e,r)}}var s="application/x-www-form-urlencoded",a="application/json",c=1,f=2,h=3;n.prototype.then=function(t,e){var r;return this._isdone?r=t.apply(e,this.result):(r=new n,this._callbacks.push(function(){var n=t.apply(e,arguments);n&&"function"==typeof n.then&&n.then(r.done,r)})),r},n.prototype.done=function(){this.result=arguments,this._isdone=!0;for(var t=0;this._callbacks.length>t;t++)this._callbacks[t].apply(null,arguments);this._callbacks=[]};var p={Promise:n,join:e,chain:r,ajax:o,get:l("GET"),post:l("POST"),put:l("PUT"),del:l("DELETE"),patch:l("PATCH"),ENOXHR:c,ETIMEOUT:f,E_PREPAIR_DATA:h,ajaxTimeout:0,contentType:a};"function"==typeof define&&define.amd?define(function(){return p}):t.promise=p})(this)}).call(C),s(["get"],function(t){C[t]=function(n,e){this.promise[t](n).then(function(t,n,r){return t?(e.onError(t,n,r),void 0):(e.onSuccess(n),void 0)})}}),s(["del","post","put","patch"],function(t){C[t]=function(n,e,r){this.promise[t](n,e).then(function(t,n,e){r(t,n,e)})}}),v.serialize=function(t){return e(t.toJSON)?t.toJSON():N.call(t)},v.deserialize=function(t,n){if(u(n))try{n=JSON.parse(n)}catch(r){return console.error("<json:deserialize>",n),t}if(i(n)&&e(t.push)){t.length=0;for(var o=0,l=n.length;l>o;o++)t.push(n[o]);return t}var s,a,c,f=t._props;for(s in n){if(a=n[s],null!=f&&(c=f.hasOwnProperty(s)?f[s]:null,null!=c)){if(e(c)){t[s]=a instanceof c?a:new c(a);continue}var h=c.deserialize;if(e(h)){t[s]=h(a);continue}}t[s]=a}return t};var I=function(){function t(t){this.route=r(t)}function n(t){var n=u.exec(t);return n?{optional:"?"===(n[2]||n[3]),parts:[n[1],n[4]]}:(n=o.exec(t))?{optional:"?"===n[3],parts:[n[1],n[4],n[5]]}:(console.error("Paths breadcrumbs should be matched by regexps"),{parts:[t]})}function e(t,e){for(var r=t.split(e),i=0,u=r.length;u>i;i++)r[i]=n(r[i]);return r}function r(t){var n=/[^\:\{]\?[^:]/.exec(t),r=null;return n&&(n=n.index+1,r=t.substring(n+1),t=t.substring(0,n)),{path:e(t,"/"),query:null==r?null:e(r,"&")}}function i(t,n,e){for(var r,i,u,o=[],l=0,s=t.length;s>l;l++)if(u=t[l],i=u.parts.slice(0),null!=i[1]){if(r=i[1],i[1]=n[r],null!=i[1])o.push(i.join(""));else if(!u.optional)return console.error("Object has no value, for not optional part - ",r),null}else o.push(i[0]);return o.join(e)}t.prototype={constructor:t,create:function(t){var n,e;return n=i(this.route.path,t,"/"),null==n?null:this.route.query&&(e=i(this.route.query,t,"&"),null==e)?null:n+(e?"?"+e:"")},hasAliases:function(t){for(var n,e=0,r=this.route.path.length;r>e;e++)if(n=this.route.path[e].parts[1],n&&null==t[n])return!1;return!0}};var u=/^([^:\?]*)(\??):(\??)([\w]+)$/,o=/^([^\{\?]*)(\{(\??)([\w]+)\})?([^\s]*)?$/;return t}();g.prototype={_isAsync:!0,_done:null,_fail:null,_always:null,_resolved:null,_rejected:null,defer:function(){this._rejected=null,this._resolved=null},resolve:function(){this._fail=null,this._resolved=arguments;var t,n,e=this._done,r=this._always;if(this._done=null,this._always=null,null!=e){for(t=e.length,n=-1;t>++n;)f(e[n],this,arguments);e.length=0}if(null!=r)for(t=r.length,n=-1;t>++n;)r[n].call(this,this);return this},reject:function(){this._done=null,this._rejected=arguments;var t,n,e=this._fail,r=this._always;if(this._fail=null,this._always=null,null!=e)for(t=e.length,n=-1;t>++n;)f(e[n],this,arguments);if(null!=r)for(t=r.length,n=-1;t>++n;)r[n].call(this,this);return this},resolveDelegate:function(){return c(this.resolve,this)},rejectDelegate:function(){return c(this.reject,this)},done:function(t){return null!=this._resolved?f(t,this,this._resolved):(this._done||(this._done=[])).push(t),this},fail:function(t){return null!=this._rejected?f(t,this,this._rejected):(this._fail||(this._fail=[])).push(t),this},always:function(t){return null!=this._rejected||null!=this._resolved?t.call(this,this):(this._always||(this._always=[])).push(t),this}};var R=function(){function t(){this._listeners={}}return t.prototype={constructor:t,on:function(t,n){return null!=n&&(this._listeners[t]||(this._listeners[t]=[])).push(n),this},once:function(t,n){return null!=n&&(n._once=!0,(this._listeners[t]||(this._listeners[t]=[])).push(n)),this},pipe:function(t){var n,e=this;return function(){n=d.call(arguments),n.unshift(t),f(e.trigger,e,n)}},trigger:function(){var t,n,e=d.call(arguments),r=e.shift(),i=this._listeners[r],u=0;if(null==i)return this;for(n=i.length;n>u;u++)t=i[u],f(t,this,e),t._once===!0&&(i.splice(u,1),u--,n--);return this},off:function(t,n){var e=this._listeners[t];if(null==e)return this;if(1===arguments.length)return e.length=0,this;for(var r=e.length,i=-1;r>++i;)e[i]===n&&(e.splice(i,1),i--,r--);return this}},t}(),k=function(){function t(t,r,i){if(e(r))return r.call(t);var u,o;if(i){for(var l=0,s=i.length;s>l;l++)if(o=i[l],u=n(t,o,r[o]))return u}else for(o in r)if(u=n(t,o,r[o]))return u}function n(t,n,r){if(e(r)===!1)return"<validation> Function expected for "+n;var i=J(t,n);return r.call(t,i)}function r(n){var e,r;return arguments.length>1&&"string"==typeof arguments[1]&&(r=d.call(arguments,1)),null!=n.Validate&&(e=t(n,n.Validate,r))?e:void 0}return{validate:r}}(),X=function(t){var n,e;if(u(t)){if(n=t,1===arguments.length)return S(t);e=arguments[1],e[_]=n}else e=t;var r,o=e.Base,s=e.Extends,a=e.Static,h=e.Construct,p=null,v=e.Store,g=e.Self,d=e.Override;if(null!=o&&delete e.Base,null!=s&&delete e.Extends,null!=a&&delete e.Static,null!=g&&delete e.Self,null!=h&&delete e.Construct,null!=v&&(null==s?s=v:i(s)?s.unshift(v):s=[v,s],delete e.Store),null!=d&&delete e.Override,void 0===e.toJSON&&(e.toJSON=N),null==o&&null==s&&null==g){if(p=null==h?function(){}:h,e.constructor=p.prototype.constructor,null!=a)for(r in a)p[r]=a[r];return p.prototype=e,null!=n&&w(n,p),p}if(p=function(){if(null!=s)for(var t=s instanceof Array,n=t?s.length:1,e=0,r=null;n>e;e++)r=t?s[e]:s,"function"==typeof r&&f(r,this,arguments);if(null!=o&&f(o,this,arguments),null!=g&&l(this)===!1)for(var i in g)this[i]=c(g[i],this);if(null!=h){var u=f(h,this,arguments);if(null!=u)return u}return this["super"]=null,this},null!=n&&w(n,p),null!=a)for(r in a)p[r]=a[r];return null!=o&&A(p,o),null!=s&&A(p,s),z(e,o,s),T(p,o,s,e,d),e=null,a=null,p},q=function(){function t(t,e,r){null==r&&(r=!0),t._timeout&&clearTimeout(t._timeout),t.defer(),t._wait++,e&&(t._result||(t._result={}),e in t._result&&console.warn("<await>",e,"already awaiting"),t._result[e]=null);var i=h(n,t,e,r);return t._timeout=setTimeout(i,q.TIMEOUT),i}function n(t,n,e){if(0===arguments.length)return t._wait=0,t.reject("408: Timeout"),void 0;if(0!==t._wait){var r=t._result;if(n){var i=d.call(arguments,3);r[n]={error:e?i.shift():null,arguments:i}}else e&&null!=arguments[3]&&(null==r&&(r=t._result={}),r.__error=arguments[3]);if(0===--t._wait){clearTimeout(t._timeout);var u,o,l=r&&r.__error;if(null==l)for(o in r)if(u=r[o],l=u&&u.error)break;if(l)return t.reject(l,r),void 0;t.resolve(r)}}}return X({Base:g,_wait:0,_timeout:null,_result:null,_resolved:!0,delegate:function(n,e){return t(this,n,e)},deferred:function(n){var e,r=new g,i=t(this,n,!0);return r.done(function(){e=d.call(arguments),e.unshift(null),i.apply(null,e)}).fail(function(t){i(t)})},Static:{TIMEOUT:2e3}})}(),L={fetch:null,save:null,del:null,onSuccess:null,onError:null,Static:{fetch:function(t){return(new this).fetch(t)}}};X.Remote=function(){function t(t,e){var r;try{r=JSON.parse(e)}catch(i){return n(t,i),void 0}t.deserialize(r),t.resolve(t)}function n(t,n){t.reject(n)}function e(t,e,i){return function(o,l,s){var a=s.getResponseHeader(r),c=null!=a&&-1!==a.indexOf(u);if(c)try{l=JSON.parse(l)}catch(o){return console.error("<XHR> invalid json response",l),n(t,l,s)}return e&&e(o,l),o?n(t,l,s):"save"===i?(t.deserialize(l),t.resolve(t)):(t.resolve(l),void 0)}}var r="content-type",u="json",o=function(t){this._route=new I(t)};return x(o,L,v,g,{serialize:function(){return i(this)?E.call(this):N.call(this)},deserialize:function(t){return v.deserialize(this,t)},fetch:function(t){return C.get(this._route.create(t||this),this),this},save:function(t){var n=this,r=n.serialize(),i=n._route.create(n),u=n._route.hasAliases(n)?"put":"post";return n.defer(),C[u](i,r,e(n,t,"save")),n},patch:function(t){return $(this,t),this.defer(),C.patch(this._route.create(this),t,e(this)),this},del:function(t){var n=this,r=n.serialize(),i=n._route.create(n);return n.defer(),C.del(i,r,e(n,t)),n},onSuccess:function(n){t(this,n)},onError:function(t,e,r){n(this,e,r)}}),function(t){return new o(t)}}(),X.LocalStore=function(){function t(t,n){var e=t.create(n);localStorage.removeItem(e)}var n=function(t){this._route=new I(t)};x(n,L,v,g,{serialize:function(){var t=i(this)?E.call(this):N.call(this);return JSON.stringify(t)},deserialize:function(t){return v.deserialize(this,t)},fetch:function(t){var n=this._route.create(t||this),e=localStorage.getItem(n);if(null==e)return this.resolve(this),this;if(u(e))try{e=JSON.parse(e)}catch(r){this.onError(r)}return this.deserialize(e),this.resolve(this)},save:function(t){var n=this._route.create(this),e=this.serialize();return localStorage.setItem(n,e),t&&t(),this},del:function(n){if(null==n&&0!==arguments.length)return console.error("<localStore:del> - selector is specified, but is undefined"),this;if(a(this)===!1)return t(this._route,n||this),this;if(null==n){for(var e=0,r=this.length;r>e;e++)this[e]=null;return this.length=0,t(this._route,this),this}var i=this.remove(n);return 0===i.length?this:this.save()},onError:function(t){this.reject({error:t})}});var e=function(t){return new n(t)};return e.prototype=n.prototype,e}(),X.bind=function(t){for(var n,e=arguments,r=1,i=arguments.length;i>r;r++)n=e[r],t[n]=t[n].bind(t);return t},X.cfg=function(t,n){if(u(t))return 1===arguments.length?m[t]:(m[t]=n,void 0);if(r(t))for(var e in t)X.cfg(e,t[e])},X.Model={},X.Serializable=v,X.Deferred=g,X.EventEmitter=R,X.Await=q,X.validate=k.validate,X.stringify=j,X.parse=b,X.patch=O,X.Collection=function(){function t(t,n){return n instanceof t?n:new t(n)}function n(){var t,n=arguments.length,i=arguments[n-1],u=arguments[n-2];return n>2&&(t=arguments[0]),i._ctor=u,x(i,r,e),null==t?X(i):X(t,i)}var e=function(){function n(t,n){if(null==n)return!1;if("function"==typeof n)return n(t);if("object"==typeof n){if(t.constructor===n.constructor&&t.constructor!==Object)return t===n;var e,r;for(var i in n){if(e=t[i],r=n[i],"string"==typeof r){var u=r[0],o=1;if("<"===u||">"===u)switch("="===r[1]&&(u+="=",o++),r=r.substring(o),u){case"<":if(e>=r)return!1;continue;case"<=":if(e>r)return!1;continue;case">":if(r>=e)return!1;continue;case">=":if(r>e)return!1;continue}}if(e!=r)return!1}return!0}return console.warn("No valid matcher",n),!1}var e={length:0,push:function(){for(var n=0,e=arguments.length;e>n;n++)this[this.length++]=t(this._ctor,arguments[n]);return this},pop:function(){var t=this[--this.length];return this[this.length]=null,t},shift:function(){if(0===this.length)return null;for(var t=this[0],n=this.length-1,e=0;n>e;e++)this[e]=this[e+1];return this[n]=null,this.length--,t},unshift:function(n){this.length++;for(var e=this.length;--e;)this[e]=this[e-1];return this[0]=t(this._ctor,n),this},splice:function(n,e){var r,i,u,o=this.length;if(n>=o)for(e=0,r=o,i=n;i>r;r++)this[r]=void 0;var l=e,s=n,a=n+l,c=arguments.length-2,f=o+c-l,h=a,p=o,v=f-o;if(v>0)for(r=p;--r>=h;)this[r+v]=this[r];if(0>v)for(r=h;p>r;)this[r+v]=this[r],r++;for(r=s,u=2;arguments.length>u;u)this[r++]=t(this._ctor,arguments[u++]);return this.length=f,this},slice:function(){return f(d,this,arguments)},sort:function(t){return y.call(this,t),this},reverse:function(){for(var t=d.call(this),n=this.length,e=-1;n>++e;)this[e]=t[n-e-1];return this},toString:function(){return""+d.call(this,0)},each:function(t,n){for(var e=this.length,r=-1;e>++r;)t.call(n||this,this[r],r);return this},where:function(t){for(var e,r=new this.constructor,i=0,u=this.length;u>i;i++)e=this[i],n(e,t)&&(r[r.length++]=e);return r},remove:function(t){for(var e=-1,r=[],i=0,u=this.length;u>i;i++)n(this[i],t)?r.push(this[i]):this[++e]=this[i];for(i=++e;u>i;i++)this[i]=null;return this.length=e,r},first:function(t){if(null==t)return this[0];var n=this.indexOf(t);return-1!==n?this[n]:null},last:function(t){if(null==t)return this[this.length-1];var n=this.lastIndexOf(t);return-1!==n?this[n]:null},indexOf:function(t,e){if(null==t)return-1;if(null!=e){if(0>e&&(e=0),e>=this.length)return-1}else e=0;for(var r=this.length;r>e;e++)if(n(this[e],t))return e;return-1},lastIndexOf:function(t,e){if(null==t)return-1;if(null!=e){if(e>=this.length&&(e=this.length-1),0>e)return-1}else e=this.length-1;for(;e>-1;e--)if(n(this[e],t))return e;return-1}};return e}(),r={toArray:function(){for(var t=Array(this.length),n=0,e=this.length;e>n;n++)t[n]=this[n];return t},toJSON:E};return n}(),function(){function t(t,n){if(t.length!==n.length)return!1;for(var e=t.length,r=0;e>r;r++)if(t[r]!==n[r])return!1;return!0}function n(n,e){if(0===e.length)return 0;for(var r=0,i=n.length;i>r;r++)if(t(n[r],e))return r+1;return n.push(e),n.length}function e(t){var e={},r=[];return function(){var i=n(r,arguments);return null==e[i]?e[i]=f(t,this,arguments):e[i]}}function r(t,n,e){return function(){t[e]=arguments;for(var r,i=0,u=n[e].length;u>i;i++)r=n[e][i],f(r,this,arguments);n[i]=null,t=null,n=null}}function i(t){var e={},i={},u=[];return function(){var o=d.call(arguments),l=o.pop(),s=n(u,o);return e[s]?(f(l,this,e[s]),void 0):i[s]?(i[s].push(l),void 0):(i[s]=[l],o=d.call(o),o.push(r(e,i,s)),f(t,this,o),void 0)}}X.Fn={memoize:e,memoizeAsync:i}}(),n.Class=X});